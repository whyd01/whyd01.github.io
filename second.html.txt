<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kontainer Detail Konten">
    <meta name="robots" content="noindex, nofollow">
    <link rel="icon" type="image/x-icon" href="static/images/logo_head.pngg">
    <title id="page-title">Detail Konten</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #1a1a1a;
            text-align: center;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background-color: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        #content-media, #content-media-video {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 20px;
            object-fit: contain;
        }
        .loading {
            font-style: italic;
            color: #e0e0e0;
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 id="content-title" class="loading">Memuat...</h1>
        <img id="content-media" style="display: none;">
        <video id="content-media-video" controls style="display: none;"></video>
        <p id="content-description"></p>
    <a id="back-button" href="#" onclick="history.back()" style="padding: 8px; gap: 10px; color: #e0e0e0; font-style: italic; align-items: center; font-size: 1em;">⏎ Back</a>
        <a id="back-button" href="/" onclick="history.back()" style="padding: 8px; gap: 10px; color: #e0e0e0; font-style: italic; align-items: center; font-size: 1em;">⾕ h♡me</a>
    <hr>
    <div id="related-content-container" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); justify-content: center; gap: 10px; margin-top: 20px;">
        </div>
<video id="content-media-video" controls style="display: none;"></video>

    </div>
<script> 
document.addEventListener('DOMContentLoaded', () => {
    const urlParams = new URLSearchParams(window.location.search);
    const contentSrc = urlParams.get('src');

    if (!contentSrc) {
        document.getElementById('content-title').textContent = "Konten tidak ditemukan.";
        return;
    }

    Promise.all([
        fetch('static/images.json').then(res => res.json()).catch(() => ({ images: [] })),
        fetch('static/videos.json').then(res => res.json()).catch(() => ({ videos: [] }))
    ]).then(([imageData, videoData]) => {
        const allContent = [...imageData.images, ...videoData.videos];
        const mainContent = allContent.find(item => item.src === contentSrc);

        if (mainContent) {
            document.getElementById('content-title').textContent = mainContent.title;
            document.getElementById('page-title').textContent = mainContent.title;

            // Tampilkan gambar atau video utama
            if (mainContent.src.endsWith('.mp4')) {
                const videoElement = document.getElementById('content-media-video');
                videoElement.src = mainContent.src;
                videoElement.style.display = 'block';
            } else {
                const imageElement = document.getElementById('content-media');
                imageElement.src = mainContent.src;
                imageElement.alt = mainContent.title;
                imageElement.style.display = 'block';
            }

            // --- Logika untuk Konten Terkait ---
            const relatedContainer = document.getElementById('related-content-container');
            const relatedContent = allContent.filter(item => 
                item.category === mainContent.category && item.src !== mainContent.src
            );

            if (relatedContent.length > 0) {
                relatedContent.forEach(item => {
                    const link = document.createElement('a');
                    link.href = `second?src=${encodeURIComponent(item.src)}`;
                    
                    const img = document.createElement('img');
                    img.src = item.src;
                    img.style.width = '150px'; // Ukuran gambar terkait
                    img.style.height = '150px';
                    img.style.objectFit = 'cover'; // Jaga rasio aspek
                    img.style.borderRadius = '5px';
                    
                    link.appendChild(img);
                    relatedContainer.appendChild(link);
                });
            } else {
                relatedContainer.innerHTML = '<p>Tidak ada konten terkait.</p>';
            }

        } else {
            document.getElementById('content-title').textContent = "Konten tidak ditemukan.";
        }
    }).catch(error => {
        console.error("Gagal memuat konten:", error);
        document.getElementById('content-title').textContent = "Terjadi kesalahan saat memuat konten.";
    });
});
</script>

</body>
</html>
